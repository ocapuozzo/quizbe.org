{% extends '::base.html.twig' %}

{% block stylesheets %}
  {{ parent() }}  
  <link rel="stylesheet"
        href="{{ asset('css/star-rating.min.css') }}">

{% endblock %}
 
{% block body -%}
  <div class="row">
    <div class="col-md-6">{{'question' | trans}} </div>
    <div class="col-md-6 text-right">
      <label for="changeClassroom">{{'classroom'|trans}}</label>
      <select id="changeClassroom">
        {# <option value="" selected>Select a classroom</option> #}
    {% for classr in classrooms %}
      {% if classr.id == classroom.id %}
      <option selected value="{{ path('question_classroom', { 'id': classr.id }) }}">{{classr.name}} </option>
      {% else %}  
      <option value="{{ path('question_classroom', { 'id': classr.id }) }}">{{classr.name}} </option>
      {% endif %}
    {% endfor %}
      {{'classroom' | trans}} {{classroom.name}}
      </select>
    </div>
  </div>
  
<div class="table-responsive">
  <table class="table table-striped table-condensed">
        <thead>
            <tr>
                <th>{{'iquestion.hname' | trans}}</th>
                <th>{{'iquestion.hdesigner_s' | trans}}</th>
                <th>{{'iquestion.hcreatedate' | trans}}</th>
                <th>{{'iquestion.hactions' | trans}}</th>
                <th>{{'iquestion.hrating' | trans}}</th>
                <th>{{'iquestion.hcountrating' | trans}}</th>
                <th>{{'iquestion.hscope' | trans}}</th>
            </tr>
        </thead>
        <tbody>
        {% for entity in entities %}
            <tr>
                <td>{{ entity.name }}</td>
                <td>{{ entity.authors }}</td>
                <td>{% if entity.datecrea %}{{ entity.datecrea|date('d/m/Y H:i') }}{% endif %}</td>
                <td>
                 <a href="{{ path('question_show', { 'id': entity.id }) }}">show</a>
                 {% if entity.canUpdate(user) %}
                  / <a href="{{ path('question_edit', { 'id': entity.id }) }}">edit</a>
                 {% endif %}  
                </td>                
                <td> {# <label for="_{{entity.id}}">({{entity.ratings | length}})</label> #}
                     <input id="_{{entity.id}}" class="rating" value="{{entity.AvgRatings}}" 
                        data-size="xxs" 
                        data-show-clear="false" 
                        data-show-caption="false" 
                        {# data-default-caption="({{entity.ratings | length}})"  #}
                        readonly="true" />
                     
                </td>
                <td> ({{entity.countRatings}}) </td>
                <td> {{entity.scope.name}} </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
        
            <a href="{{ path('question_new') }}">
                {{'iquestion.link.add' | trans}}
            </a> 
            <span class="pull-right"><a href="#">Export</a></span>
    {% endblock %}

{% block javascripts %}
  {{ parent() }}
  
  <script type="text/javascript" src="{{asset('js/star-rating.min.js')}}"></script>
  <script>
    $(function(){
      // bind change event to select
      $('#changeClassroom').on('change', function () {
          var url = $(this).val(); // get selected value
          if (url) { // require a URL
              window.location = url; // redirect
          }
          return false;
      });
    });
</script>      
{% endblock %}